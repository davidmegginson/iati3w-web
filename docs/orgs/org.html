<!DOCTYPE html>
<html>
  <head>
    <title>IATI/3W explorer</title>
    <link rel="stylesheet" href="../style.css"/>
    <link rel="icon" type="image/png" sizes="512x512" href="../iati3w-icon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
  </head>
  <body>
    <header>
      <a href="../" title="Home">
        <img src="../iati3w-icon.png" class="logo" />
      </a>
      <h1>
        IATI/3W explorer
      </h1>
      <nav id="primary-nav" class="tabs">
        <a class="active" href="../orgs/" title="Organisations involved in activites in Somalia.">Who?</a>
        <a href="../sectors/" title="Aid sectors active in Somalia.">What?</a>
        <a href="../locations/" title="Locations active in Somalia.">Were?</a>
        <a href="../">About</a>
      </nav>
    </header>
    <main>
      <section id="content">
        <p class="loading">Loadingâ€¦</p>
      </section>
    </main>
    <script id="template.org" type="template">

      <h2>Organisation: {{ org_name }}</h2>

      <section id="partners">
        <h3>Who do they collaborate with?</h3>
        {% if info.partners | length > 0 %}
        <p class="inline-list">
          {% for org in info.partners.keys() | sort %}
          <span>
            <a href="org.html?ref={{ org | urlenc }}">{{ org }}</a>
            <br/>({{ info.partners[org] | plural("activity", "activities") }})
          </span>
          {% endfor %}
        </p>
        {% else %}
        <p>
          No partners are listed for the activities involving {{ org_name }}.
        </p>
        {% endif %}
      </section>
      
      <section id="sectors">
        <h3>What do they do?</h3>
        {% for type in info.sectors.keys() %}
        <section id="sectors.{{ type }}">
          <h4>{{ type | sector }}</h4>
          <p class="inline-list">
            {% for sector in info.sectors[type].keys() | sort %}
            <span>
              <a href="../sectors/sector.html?ref={{ sector | urlenc }}&amp;type={{ type }}">{{ sector }}</a>
              <br/>({{ info.sectors[type][sector] | plural("activity", "activities") }})
            </span>
            {% endfor %}
          </p>
        </section>
        {% else %}
        <p class="warning">
          There is no sector information in the activities involving {{ org_name }}.
        </p>
        {% endfor %}
      </section>
      
      <section id="locations">
        <h3>Where do they work?</h3>
        {% for type in info.locations.keys() %}
        <section id="locations.{{ type }}">
          <h4>{{ type | location }}</h4>
          <p id="locations.admin1" class="inline-list">
            {% for location in info.locations[type].keys() | sort %}
            <span>
              <a href="../locations/location.html?ref={{ location | urlenc }}&amp;type=admin1">{{ location }}</a>
              <br/>({{ info.locations[type][location] | plural("activity", "activities") }})
            </span>
            {% endfor %}
          </p>
        </section>
        {% else %}
        <p>
          There is no subnational location information in the activities involving {{ org_name }}.
        </p>
        {% endfor %}
      </section>
      
      <section id="activities">
        <h3>Activities</h3>
        {% for type in info.activities.keys() %}
        <section id="activities.{{ type }}">
          <h4>{{ type | role }}</h4>
          <p class="inline-list wide">
            {% for activity in info.activities[type] %}
            <span>
              [{{ activity.source }}]
              <a href="../activity.html?ref={{ activity.identifier | urlenc }}">{{ activity.title }}</a>
            </span>
            {% endfor %}
          </p>
        </section>
        {% endfor %}
      </section>
      
    </script>
    <script type="module" defer="defer">
      import { load_org } from "../script.js";
      load_org();
    </script>
  </body>
</html>
